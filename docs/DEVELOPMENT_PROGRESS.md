# Afisha.kz - –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.3
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 28 —è–Ω–≤–∞—Ä—è 2026
**–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** 2.3.0-full
**–í–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** `claude/fix-business-members-premium-bln5q`

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
4. [–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∫–æ–¥–∞)
6. [API Endpoints](#api-endpoints)
7. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
8. [–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã](#—Ç–∞—Ä–∏—Ñ–Ω—ã–µ-–ø–ª–∞–Ω—ã)
9. [–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏](#—Å–ª–µ–¥—É—é—â–∏–µ-—à–∞–≥–∏)

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Afisha.kz** ‚Äî –µ–¥–∏–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–æ–±—ã—Ç–∏–π, —Å–∫–∏–¥–æ–∫ –∏ –±–∏–∑–Ω–µ—Å–∞ –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞.

### –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

1. **–î–ª—è –∂–∏—Ç–µ–ª–µ–π (B2C):** –ù–∞–π—Ç–∏ —Å–æ–±—ã—Ç–∏—è, –∞–∫—Ü–∏–∏ –∏ –±–∏–∑–Ω–µ—Å—ã –≤ —Å–≤–æ—ë–º –≥–æ—Ä–æ–¥–µ
2. **–î–ª—è –±–∏–∑–Ω–µ—Å–∞ (B2B):** –ü—Ä–æ–¥–≤–∏–≥–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –∞–∫—Ü–∏–∏, –ø—Ä–∏–≤–ª–µ–∫–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤
3. **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:** –ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | URL |
|-----------|--------|-----|
| Backend API | ‚úÖ Online | https://afisha-bekend-production.up.railway.app |
| Frontend | ‚úÖ Online | https://jezkazgan-connect-production.up.railway.app |
| Database | ‚úÖ Connected | Neon PostgreSQL |
| Admin Panel | ‚úÖ –ì–æ—Ç–æ–≤–∞ | /admin |
| Business Cabinet | ‚úÖ –ì–æ—Ç–æ–≤–∞ | /business |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        FRONTEND                                  ‚îÇ
‚îÇ  React 18 + TypeScript + Vite + Tailwind CSS + shadcn/ui        ‚îÇ
‚îÇ  TanStack Query –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ REST API (JWT Auth)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        BACKEND                                   ‚îÇ
‚îÇ  Hono (Node.js) + Drizzle ORM + TypeScript                      ‚îÇ
‚îÇ  JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è + Role-based access control                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ SQL
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       DATABASE                                   ‚îÇ
‚îÇ  Neon PostgreSQL (Serverless)                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –î–µ–ø–ª–æ–π

```
GitHub Repository
      ‚îÇ
      ‚ñº
Railway Platform
  ‚îú‚îÄ‚îÄ Frontend Service (Vite static build)
  ‚îî‚îÄ‚îÄ Backend Service (Node.js)
            ‚îÇ
            ‚ñº
      Neon PostgreSQL
```

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. –ü—É–±–ª–∏—á–Ω–∞—è —á–∞—Å—Ç—å (Frontend)

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ü—É—Ç—å | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|------|--------|----------|
| –ì–ª–∞–≤–Ω–∞—è | `/` | ‚úÖ | –§–æ—Ç–æ-–∫–∞—Ä—É—Å–µ–ª—å –≥–æ—Ä–æ–¥–∞, –≤—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞, —Å–æ–±—ã—Ç–∏—è |
| –°–æ–±—ã—Ç–∏—è –≥–æ—Ä–æ–¥–∞ | `/city/:slug` | ‚úÖ | –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ |
| –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è | `/events/:id` | ‚úÖ | –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |
| –ö–∞—Ç–∞–ª–æ–≥ –±–∏–∑–Ω–µ—Å–æ–≤ | `/businesses` | ‚úÖ | –°–ø–∏—Å–æ–∫ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ |
| –ü—Ä–æ—Ñ–∏–ª—å –±–∏–∑–Ω–µ—Å–∞ | `/businesses/:id` | ‚úÖ | –î–µ—Ç–∞–ª–∏ –±–∏–∑–Ω–µ—Å–∞ |
| –ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏ | `/promotions` | ‚úÖ | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏–π |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | `/auth` | ‚úÖ | –í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞ | `/create-business` | ‚úÖ | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å–∞ |

### 2. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`/admin`)

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ü—É—Ç—å | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|------|--------|----------|
| Dashboard | `/admin` | ‚úÖ | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ API) |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | `/admin/users` | ‚úÖ | CRUD, —Å–º–µ–Ω–∞ —Ä–æ–ª–µ–π, Premium |
| –ë–∏–∑–Ω–µ—Å—ã | `/admin/businesses` | ‚úÖ | –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–º–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–∞ |
| –°–æ–±—ã—Ç–∏—è | `/admin/events` | ‚úÖ | –ú–æ–¥–µ—Ä–∞—Ü–∏—è, –æ–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ |
| –ê–∫—Ü–∏–∏ | `/admin/promotions` | ‚úÖ | –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∞–∫—Ü–∏–π |
| –ì–æ—Ä–æ–¥–∞ | `/admin/cities` | ‚úÖ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞–º–∏ |
| –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–∞ | `/admin/cities/:id/banners` | ‚úÖ | –†–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã |
| –§–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ | `/admin/cities/:id/photos` | ‚úÖ | –§–æ—Ç–æ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| –§–∏–Ω–∞–Ω—Å—ã | `/admin/finance` | ‚úÖ | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤ |
| –ú–æ–¥–µ—Ä–∞—Ü–∏—è | `/admin/moderation` | ‚úÖ | –û—á–µ—Ä–µ–¥—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | `/admin/analytics` | ‚úÖ | –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç—ã |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | `/admin/settings` | ‚úÖ | –¢–µ–º–∞, —è–∑—ã–∫, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- –°—Å—ã–ª–∫–∞ "–ù–∞ —Å–∞–π—Ç" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é

### 3. –ö–∞–±–∏–Ω–µ—Ç –±–∏–∑–Ω–µ—Å–∞ (`/business`)

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ü—É—Ç—å | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|------|--------|----------|
| Dashboard | `/business` | ‚úÖ | KPI, –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è |
| –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ | `/business/publications` | ‚úÖ | –ú–æ–∏ —Å–æ–±—ã—Ç–∏—è –∏ –∞–∫—Ü–∏–∏ |
| –°–æ–±—ã—Ç–∏—è | `/business/publications/events` | ‚úÖ | –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π –±–∏–∑–Ω–µ—Å–∞ |
| –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ | `/business/publications/events/new` | ‚úÖ | –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è |
| –ê–∫—Ü–∏–∏ | `/business/publications/promotions` | ‚úÖ | –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π –±–∏–∑–Ω–µ—Å–∞ |
| –°–æ–∑–¥–∞—Ç—å –∞–∫—Ü–∏—é | `/business/publications/promotions/new` | ‚úÖ | –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫—Ü–∏–∏ |
| –ü—Ä–æ—Ñ–∏–ª—å | `/business/profile` | ‚úÖ | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –±–∏–∑–Ω–µ—Å–∞ |
| –ö–æ–º–∞–Ω–¥–∞ | `/business/team` | ‚úÖ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ (Premium) |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | `/business/stats` | ‚úÖ | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Lite+) |
| –ü–æ–¥–ø–∏—Å–∫–∞ | `/business/subscription` | ‚úÖ | –¢–∞—Ä–∏—Ñ—ã, –æ–ø–ª–∞—Ç–∞ |
| –ë–∞–Ω–Ω–µ—Ä | `/business/banner` | ‚úÖ | –†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä (Premium) |
| **–ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏** | `/business/autopublish` | ‚úÖ | –°–æ—Ü—Å–µ—Ç–∏ (Premium) |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | `/business/settings` | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ |

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- Sidebar —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ —Ç–∞—Ä–∏—Ñ—É (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã —Å –∏–∫–æ–Ω–∫–æ–π –∫–æ—Ä–æ–Ω—ã)
- –°—Å—ã–ª–∫–∞ "–ù–∞ —Å–∞–π—Ç" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π

### 4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------|----------|
| –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã | ‚úÖ | –°–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è/—Å–∏—Å—Ç–µ–º–Ω–∞—è |
| JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | ‚úÖ | –¢–æ–∫–µ–Ω—ã –≤ localStorage + API refresh |
| Role-based –¥–æ—Å—Ç—É–ø | ‚úÖ | user, business, moderator, admin |
| –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω | ‚úÖ | Mobile-first |
| –ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ | ‚úÖ | –î–æ 5 —á–µ–ª–æ–≤–µ–∫ (Premium) |
| –§–æ—Ç–æ-–∫–∞—Ä—É—Å–µ–ª—å | ‚úÖ | Embla Carousel + Autoplay |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | ‚úÖ | Cloudinary –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ | ‚úÖ | –†–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ | ‚úÖ | CRUD —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π | ‚úÖ | –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **–ò–ò –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | ‚úÖ | Ideogram V2 |
| **–ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞** | ‚úÖ | –ó–∞–∫–æ–Ω –†–ö –æ–± –ò–ò (01.2026) |
| **–ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–æ—Ü—Å–µ—Ç–∏** | ‚úÖ | Telegram, VK, Instagram, Facebook |
| **–í–∏–¥–µ–æ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–æ–±—ã—Ç–∏–π** | ‚úÖ | YouTube, Vimeo, MP4 (Premium) |
| **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** | ‚úÖ | –ë–æ–Ω—É—Å—ã –∑–∞ first_purchase |
| **–ü–ª–∞—Ç–µ–∂–∏ Kaspi/Halyk** | ‚úÖ | QR-–∫–æ–¥—ã, webhooks |
| **Fraud-–∑–∞—â–∏—Ç–∞** | ‚úÖ | Risk scoring, IP blocking |
| **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | ‚úÖ | Web Push API |
| **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏** | ‚úÖ | –î–ª—è –±–∏–∑–Ω–µ—Å–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π |
| **Swagger/OpenAPI** | ‚úÖ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ `/docs` |
| **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π** | ‚úÖ | Premium conversion tracking |

---

## –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (React + Vite + Tailwind)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. –°–æ–∑–¥–∞–Ω–∏–µ backend –Ω–∞ Hono + Drizzle ORM
4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Neon PostgreSQL
5. –î–µ–ø–ª–æ–π –Ω–∞ Railway (frontend + backend)

### –≠—Ç–∞–ø 2: –ü—É–±–ª–∏—á–Ω–∞—è —á–∞—Å—Ç—å

1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤—ã–±–æ—Ä–æ–º –≥–æ—Ä–æ–¥–∞
2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–æ—Ä–æ–¥–∞ —Å —Å–æ–±—ã—Ç–∏—è–º–∏
3. –ö–∞—Ç–∞–ª–æ–≥ –±–∏–∑–Ω–µ—Å–æ–≤ –∏ –ø—Ä–æ—Ñ–∏–ª–∏
4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫—Ü–∏–π
5. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

### –≠—Ç–∞–ø 3: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –°–æ–∑–¥–∞–Ω–∏–µ Layout —Å –±–æ–∫–æ–≤—ã–º –º–µ–Ω—é
2. Dashboard —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
3. –°—Ç—Ä–∞–Ω–∏—Ü—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Users, Businesses, Events, Promotions)
4. –°—Ç—Ä–∞–Ω–∏—Ü—ã Cities, Finance, Moderation, Analytics, Settings
5. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API** (–≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∂–∏–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)

### –≠—Ç–∞–ø 4: –ö–∞–±–∏–Ω–µ—Ç –±–∏–∑–Ω–µ—Å–∞

1. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX/UI (—Å–º. `docs/BUSINESS_CABINET_SPEC.md`)
2. Dashboard —Å KPI –∏ –ª–∏–º–∏—Ç–∞–º–∏ —Ç–∞—Ä–∏—Ñ–∞
3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏
4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏
5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã–º –±–∞–Ω–Ω–µ—Ä–æ–º (Premium)
6. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ Header** –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –≠—Ç–∞–ø 5: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è

1. **–¢–µ–º–∞** ‚Äî —Å–æ–∑–¥–∞–Ω ThemeProvider —Å localStorage
2. **–û–±–ª–∞—Å—Ç–∏ –≥–æ—Ä–æ–¥–æ–≤** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ 2022 –≥–æ–¥–∞
3. **–ê–∫—Ü–∏–∏** ‚Äî —É–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" (—Å–æ–∑–¥–∞—ë—Ç –±–∏–∑–Ω–µ—Å)
4. **Admin API** ‚Äî —Å–æ–∑–¥–∞–Ω `/admin` endpoint —Å JWT auth
5. **Frontend API hooks** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫–æ –≤—Å–µ–º –∞–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

### –≠—Ç–∞–ø 6: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞ –±–∏–∑–Ω–µ—Å–∞

1. **useCurrentUser hook** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π/–∞–∫—Ü–∏–π** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã CreateEvent, CreatePromotion
3. **–°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π/–∞–∫—Ü–∏–π** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã Events, Promotions
4. **–ü—Ä–æ—Ñ–∏–ª—å –±–∏–∑–Ω–µ—Å–∞** ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–∫–∫–∞—É–Ω—Ç–∞
6. **–ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤** ‚Äî –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Premium:
   - –¢–∞–±–ª–∏—Ü–∞ `business_members` –≤ –ë–î
   - API endpoints –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–æ–π
   - –†–æ–ª–∏: admin, editor, viewer
7. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞—Ä–∏—Ñ–æ–≤** ‚Äî –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω—ã —Ñ–∏—á–∏ —Ç–∞—Ä–∏—Ñ–æ–≤
8. **–ù–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ "–ù–∞ —Å–∞–π—Ç" –≤ –∫–∞–±–∏–Ω–µ—Ç–∞—Ö

### –≠—Ç–∞–ø 7: UI/UX —É–ª—É—á—à–µ–Ω–∏—è

1. **–§–æ—Ç–æ-–∫–∞—Ä—É—Å–µ–ª—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π** ‚Äî –∑–∞–º–µ–Ω–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Ñ–æ–Ω–∞:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Å–ª–∞–π–¥–æ–≤ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
   - –§–æ—Ç–æ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ—Ä–æ–¥–æ–≤: –ñ–µ–∑–∫–∞–∑–≥–∞–Ω, –ê–ª–º–∞—Ç—ã, –ê—Å—Ç–∞–Ω–∞
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ Wikimedia Commons (–ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–µ)
   - –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞
2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –º–µ–Ω—é Header**:
   - –£–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è "–°–æ–∑–¥–∞—Ç—å –±–∏–∑–Ω–µ—Å" (–≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
   - –î–ª—è –±–∏–∑–Ω–µ—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–æ–ª—å–∫–æ "–ö–∞–±–∏–Ω–µ—Ç –±–∏–∑–Ω–µ—Å–∞"
   - –î–ª—è –∞–¥–º–∏–Ω–æ–≤/–º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Ç–æ–ª—å–∫–æ "–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"
3. **–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç–∞—Ö**:
   - –°—Å—ã–ª–∫–∏ "–ù–∞ —Å–∞–π—Ç" –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é

### –≠—Ç–∞–ø 8: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

1. **Cloudinary –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ImageUpload` —Å drag-and-drop
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Cloudinary
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø–∞–ø–æ–∫ (events, promotions, cities)
   - Unsigned upload preset –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. **–ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–æ–≤** ‚Äî —Ä–µ–∫–ª–∞–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
   - –¢–∞–±–ª–∏—Ü–∞ `city_banners` –≤ –ë–î
   - CRUD API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞–º–∏
   - –ê–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/cities/:id/banners`
   - –ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –ø–æ–∫–∞–∑–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤
   - –°—á—ë—Ç—á–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –∫–ª–∏–∫–æ–≤
3. **–§–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:
   - –¢–∞–±–ª–∏—Ü–∞ `city_photos` –≤ –ë–î
   - CRUD API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ
   - –ê–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/cities/:id/photos`
   - –ü—É–±–ª–∏—á–Ω—ã–π API `/cities/:slug/photos`
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç API –Ω–∞–¥ —Ö–∞—Ä–¥–∫–æ–¥–æ–º –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Cloudinary
4. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–±—ã—Ç–∏—è** ‚Äî —É–ª—É—á—à–µ–Ω–∏—è:
   - –†–∞–±–æ—á–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
   - –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç" (–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞—Ñ–∏—à–∏)
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API
5. **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
   - –¢–∞–±–ª–∏—Ü–∞ `favorites` –≤ –ë–î
   - API –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –≠—Ç–∞–ø 9: Business Premium —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ò–ò –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Ideogram V2):**
   - –°–µ—Ä–≤–∏—Å `nanobanana.ts` ‚Äî AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä: **Ideogram V2** (–æ—Ç–ª–∏—á–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∏)
   - API routes `/ai/*` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –∏—Å—Ç–æ—Ä–∏—è, –ø–æ–¥—Å–∫–∞–∑–∫–∏
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AiImageGenerator` ‚Äî UI —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π
   - –°—Ç–∏–ª–∏: banner, promo, event, poster, social
   - –ê–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥ —Ä—É—Å—Å–∫–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
   - –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

2. **–ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–æ—Ü—Å–µ—Ç–∏:**
   - –°–µ—Ä–≤–∏—Å `autopublish.ts` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram, VK, Instagram, **Facebook**
   - **Retry –ª–æ–≥–∏–∫–∞** ‚Äî —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff (2s, 4s, 8s), –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫
   - **Container-based Instagram** ‚Äî publish —á–µ—Ä–µ–∑ polling —Å—Ç–∞—Ç—É—Å–∞
   - **–î–µ—Ç–µ–∫—Ü–∏—è –∏—Å—Ç–µ–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤** ‚Äî –∫–æ–¥—ã –æ—à–∏–±–æ–∫ –¥–ª—è FB/IG –∏ VK
   - **Fallback –¥–ª—è Telegram** ‚Äî —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ç–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - API routes `/autopublish/*` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—É–±–ª–∏–∫–∞—Ü–∏—è
   - –¢–∞–±–ª–∏—Ü–∞ `auto_publish_settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
   - –¢–∞–±–ª–∏—Ü–∞ `auto_publish_history` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π + retryCount
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/business/autopublish` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏

3. **–í–∏–¥–µ–æ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–æ–±—ã—Ç–∏–π:**
   - –ü–æ–ª—è `videoUrl`, `videoThumbnail` –≤ —Ç–∞–±–ª–∏—Ü–µ events
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `VideoUpload` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ YouTube/Vimeo/MP4
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –¥–ª—è YouTube
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ Premium —Ç–∞—Ä–∏—Ñ–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è —Å –≤–∏–¥–µ–æ

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–ø–∏—Å–∫–∏:**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ Premium —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
   - –†–∞—Å—à–∏—Ä–µ–Ω –±–ª–æ–∫ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ Premium
   - –ò–∫–æ–Ω–∫–∏ –¥–ª—è AI, –∞–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–π, –≤–∏–¥–µ–æ

### –≠—Ç–∞–ø 10: –ó–∞–∫–æ–Ω –†–ö –æ–± –ò–ò

1. **–ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å —è–Ω–≤–∞—Ä—è 2026):**
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: `isAiGenerated`, `aiDisclaimer`, `generatedAt`, `provider`
   - –¢—Ä—ë—Ö—è–∑—ã—á–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:
     - üá∑üá∫ "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º"
     - üá∞üáø "–ë“±–ª —Å—É—Ä–µ—Ç –∂–∞—Å–∞–Ω–¥—ã –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∞—Ä“õ—ã–ª—ã –∂–∞—Å–∞–ª“ì–∞–Ω"
     - üá¨üáß "This image was generated by artificial intelligence"
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AiBadge` ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–µ—Ç–∫–∞ –ò–ò
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AiImage` ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π
   - –ü–æ–ª—è `isImageAiGenerated` –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö events –∏ promotions
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≤—Å–µ—Ö AI-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö –≤ UI

### –≠—Ç–∞–ø 11: –ü–æ–ª–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (–¢–µ–∫—É—â–∏–π)

1. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
   - –¢–∞–±–ª–∏—Ü—ã: `referral_codes`, `referrals`, `referral_bonuses`
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - first_purchase –±–æ–Ω—É—Å—ã (10% —Ä–µ—Ñ–µ—Ä–µ—Ä—É, 500‚Ç∏ —Ä–µ—Ñ–µ—Ä–∞–ª—É)
   - API routes `/referrals/*` ‚Äî –∫–æ–¥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Å–ø–∏—Å–æ–∫, –±–æ–Ω—É—Å—ã
   - –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —á–µ—Ä–µ–∑ Kaspi/Halyk

2. **–ü–ª–∞—Ç–µ–∂–∏ Kaspi/Halyk:**
   - –¢–∞–±–ª–∏—Ü—ã: `payments`, `payment_webhooks`
   - API routes `/payments/*` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –∏—Å—Ç–æ—Ä–∏—è
   - Webhook handlers –¥–ª—è Kaspi –∏ Halyk
   - QR-–∫–æ–¥—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Kaspi
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (first_purchase bonus)

3. **Fraud-–∑–∞—â–∏—Ç–∞:**
   - –¢–∞–±–ª–∏—Ü—ã: `fraud_logs`, `blocked_entities`, `device_fingerprints`
   - –°–µ—Ä–≤–∏—Å `fraud.ts` ‚Äî Risk scoring –∞–ª–≥–æ—Ä–∏—Ç–º
   - –î–µ—Ç–µ–∫—Ü–∏—è: suspicious_login, multiple_accounts, payment_fraud, referral_abuse
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ high-risk IP
   - Device fingerprinting –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –º—É–ª—å—Ç–∏-–∞–∫–∫–∞—É–Ω—Ç–æ–≤

4. **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –¢–∞–±–ª–∏—Ü—ã: `push_subscriptions`, `notifications`
   - Web Push API —Å VAPID –∫–ª—é—á–∞–º–∏
   - API routes `/push/*` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —á—Ç–µ–Ω–∏–µ
   - –¢–∏–ø—ã: event_reminder, promotion_new, payment_success, referral_bonus –∏ –¥—Ä.
   - Admin endpoint –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏

5. **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏:**
   - –¢–∞–±–ª–∏—Ü—ã: `reviews`, `review_replies`, `review_votes`
   - API routes `/reviews/*` ‚Äî CRUD, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –æ—Ç–≤–µ—Ç—ã
   - –†–µ–π—Ç–∏–Ω–≥–∏ 1-5 –∑–≤—ë–∑–¥ –¥–ª—è –±–∏–∑–Ω–µ—Å–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (5‚òÖ, 4‚òÖ, 3‚òÖ...)
   - –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ (isApproved)
   - –û—Ç–≤–µ—Ç—ã –æ—Ç –±–∏–∑–Ω–µ—Å–∞ (isBusinessReply)
   - –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å (helpful/not helpful)

6. **OpenAPI/Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - Route `/docs` ‚Äî Swagger UI
   - Route `/docs/openapi.json` ‚Äî OpenAPI 3.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö API endpoints
   - –°—Ö–µ–º—ã –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

7. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π:**
   - –¢–∞–±–ª–∏—Ü–∞: `analytics_events`
   - API routes `/analytics/*` ‚Äî track, conversions, revenue, traffic
   - Premium conversion tracking
   - Business tier upgrade tracking
   - Revenue analytics –ø–æ —Ç–∏–ø–∞–º –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
   - Traffic sources (UTM, device, referrer)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

### Frontend (`/src`)

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx           # –ù–∞–≤–∏–≥–∞—Ü–∏—è, –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx           # –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ ui/                      # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + Carousel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ image-upload.tsx     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ video-upload.tsx     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ (Premium)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai-image-generator.tsx # AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Premium)
‚îÇ   ‚îî‚îÄ‚îÄ ThemeProvider.tsx        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ use-api.ts               # React Query hooks (admin + team)
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api.ts                   # API —Ñ—É–Ω–∫—Ü–∏–∏ (admin + team)
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ admin/                   # 12 —Å—Ç—Ä–∞–Ω–∏—Ü –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminLayout.tsx      # + —Å—Å—ã–ª–∫–∞ "–ù–∞ —Å–∞–π—Ç"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CitiesPage.tsx       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CityBannersPage.tsx  # –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CityPhotosPage.tsx   # –§–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ business/                # 13 —Å—Ç—Ä–∞–Ω–∏—Ü –∫–∞–±–∏–Ω–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BusinessLayout.tsx   # Sidebar —Å –ª–∏–º–∏—Ç–∞–º–∏ + "–ù–∞ —Å–∞–π—Ç"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Publications.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Events.tsx           # –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateEvent.tsx      # –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (+ –≤–∏–¥–µ–æ, AI)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Promotions.tsx       # –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreatePromotion.tsx  # –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Profile.tsx          # –ü—Ä–æ—Ñ–∏–ª—å –±–∏–∑–Ω–µ—Å–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Team.tsx             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π (Premium)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Subscription.tsx     # –¢–∞—Ä–∏—Ñ—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–æ Premium —Ñ—É–Ω–∫—Ü–∏—è–º–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings.tsx         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Banner.tsx           # –†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AutoPublish.tsx      # –ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–æ—Ü—Å–µ—Ç–∏ (Premium)
‚îÇ   ‚îú‚îÄ‚îÄ Index.tsx                # –ì–ª–∞–≤–Ω–∞—è —Å —Ñ–æ—Ç–æ-–∫–∞—Ä—É—Å–µ–ª—å—é
‚îÇ   ‚îî‚îÄ‚îÄ ...                      # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îî‚îÄ‚îÄ App.tsx                      # –†–æ—É—Ç–∏–Ω–≥
```

### Backend (`/backend/src`)

```
backend/src/
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                 # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Neon
‚îÇ   ‚îú‚îÄ‚îÄ schema.ts                # Drizzle —Å—Ö–µ–º–∞ (+ cityBanners, cityPhotos)
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                  # Seed –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts                  # /auth (login, register, me, profile)
‚îÇ   ‚îú‚îÄ‚îÄ cities.ts                # /cities (+ banners, photos)
‚îÇ   ‚îú‚îÄ‚îÄ events.ts                # /events (+ videoUrl, videoThumbnail)
‚îÇ   ‚îú‚îÄ‚îÄ businesses.ts            # /businesses
‚îÇ   ‚îú‚îÄ‚îÄ promotions.ts            # /promotions
‚îÇ   ‚îú‚îÄ‚îÄ admin.ts                 # /admin/* (+ analytics, moderation, delete)
‚îÇ   ‚îú‚îÄ‚îÄ team.ts                  # /team/* (Premium feature)
‚îÇ   ‚îú‚îÄ‚îÄ favorites.ts             # /favorites (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
‚îÇ   ‚îú‚îÄ‚îÄ upload.ts                # /upload (Cloudinary config)
‚îÇ   ‚îú‚îÄ‚îÄ ai.ts                    # /ai/* (AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, Premium)
‚îÇ   ‚îú‚îÄ‚îÄ autopublish.ts           # /autopublish/* (—Å–æ—Ü—Å–µ—Ç–∏, Premium)
‚îÇ   ‚îú‚îÄ‚îÄ referrals.ts             # /referrals/* (—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
‚îÇ   ‚îú‚îÄ‚îÄ payments.ts              # /payments/* (Kaspi/Halyk)
‚îÇ   ‚îú‚îÄ‚îÄ push.ts                  # /push/* (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ reviews.ts               # /reviews/* (–æ—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏)
‚îÇ   ‚îú‚îÄ‚îÄ analytics.ts             # /analytics/* (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ openapi.ts               # /docs (Swagger UI)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ cloudinary.ts            # Cloudinary –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ nanobanana.ts            # AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ autopublish.ts           # –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Å–æ—Ü—Å–µ—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ fraud.ts                 # Fraud-–∑–∞—â–∏—Ç–∞ –∏ risk scoring
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ auth.ts                  # JWT middleware
‚îî‚îÄ‚îÄ index.ts                     # Hono app entry
```

---

## API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /` | GET | Health check |
| `GET /cities` | GET | –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ |
| `GET /cities/:slug` | GET | –ì–æ—Ä–æ–¥ –ø–æ slug |
| `GET /cities/:slug/banners` | GET | –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–∞ |
| `GET /cities/:slug/photos` | GET | –§–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ –≥–æ—Ä–æ–¥–∞ |
| `GET /events` | GET | –°–æ–±—ã—Ç–∏—è (cityId, category, featured) |
| `GET /events/:id` | GET | –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è |
| `GET /businesses` | GET | –ë–∏–∑–Ω–µ—Å—ã (cityId, category) |
| `GET /promotions` | GET | –ê–∫—Ü–∏–∏ (cityId, active) |
| `POST /auth/login` | POST | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
| `POST /auth/register` | POST | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `GET /auth/me` | GET | –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (JWT) |
| `POST /auth/change-password` | POST | –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è |
| `PATCH /auth/profile` | PATCH | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è |

### –ê–¥–º–∏–Ω (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT, —Ä–æ–ª—å admin/moderator)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /admin/stats` | GET | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |
| `GET /admin/analytics` | GET | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| `GET /admin/moderation` | GET | –û—á–µ—Ä–µ–¥—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ |
| `GET /admin/users` | GET | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `PATCH /admin/users/:id` | PATCH | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `DELETE /admin/users/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `GET /admin/businesses` | GET | –°–ø–∏—Å–æ–∫ –±–∏–∑–Ω–µ—Å–æ–≤ + tier stats |
| `PATCH /admin/businesses/:id` | PATCH | –û–±–Ω–æ–≤–∏—Ç—å –±–∏–∑–Ω–µ—Å |
| `PATCH /admin/businesses/:id/verify` | PATCH | –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å |
| `DELETE /admin/businesses/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –±–∏–∑–Ω–µ—Å |
| `GET /admin/events` | GET | –°–æ–±—ã—Ç–∏—è –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ |
| `PATCH /admin/events/:id/approve` | PATCH | –û–¥–æ–±—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ |
| `PATCH /admin/events/:id/reject` | PATCH | –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ |
| `DELETE /admin/events/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ |
| `GET /admin/promotions` | GET | –í—Å–µ –∞–∫—Ü–∏–∏ |
| `PATCH /admin/promotions/:id` | PATCH | –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ü–∏—é |
| `DELETE /admin/promotions/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –∞–∫—Ü–∏—é |
| `GET /admin/cities` | GET | –í—Å–µ –≥–æ—Ä–æ–¥–∞ |
| `POST /admin/cities` | POST | –°–æ–∑–¥–∞—Ç—å –≥–æ—Ä–æ–¥ |
| `PATCH /admin/cities/:id` | PATCH | –û–±–Ω–æ–≤–∏—Ç—å –≥–æ—Ä–æ–¥ |
| `DELETE /admin/cities/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –≥–æ—Ä–æ–¥ |

### –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT, —Ä–æ–ª—å admin)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /admin/cities/:cityId/banners` | GET | –°–ø–∏—Å–æ–∫ –±–∞–Ω–Ω–µ—Ä–æ–≤ –≥–æ—Ä–æ–¥–∞ |
| `POST /admin/cities/:cityId/banners` | POST | –°–æ–∑–¥–∞—Ç—å –±–∞–Ω–Ω–µ—Ä |
| `PATCH /admin/cities/:cityId/banners/:id` | PATCH | –û–±–Ω–æ–≤–∏—Ç—å –±–∞–Ω–Ω–µ—Ä |
| `DELETE /admin/cities/:cityId/banners/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –±–∞–Ω–Ω–µ—Ä |
| `GET /admin/banners` | GET | –í—Å–µ –±–∞–Ω–Ω–µ—Ä—ã (–æ–±–∑–æ—Ä) |

### –§–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT, —Ä–æ–ª—å admin)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /admin/cities/:cityId/photos` | GET | –°–ø–∏—Å–æ–∫ —Ñ–æ—Ç–æ –≥–æ—Ä–æ–¥–∞ |
| `POST /admin/cities/:cityId/photos` | POST | –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ |
| `PATCH /admin/cities/:cityId/photos/:id` | PATCH | –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ç–æ |
| `DELETE /admin/cities/:cityId/photos/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ |

### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /favorites` | GET | –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ |
| `GET /favorites/check` | GET | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ |
| `POST /favorites` | POST | –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ |
| `POST /favorites/toggle` | POST | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ |
| `DELETE /favorites/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ |

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /upload/config` | GET | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Cloudinary |
| `GET /upload/presets` | GET | –ü—Ä–µ—Å–µ—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ |

### –ö–æ–º–∞–Ω–¥–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT, —Ä–æ–ª—å business, —Ç–∞—Ä–∏—Ñ Premium)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /team` | GET | –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (max 5) |
| `POST /team/invite` | POST | –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ email |
| `PUT /team/:id` | PUT | –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å |
| `DELETE /team/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ |

### AI –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT, —Ç–∞—Ä–∏—Ñ Premium)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /ai/status` | GET | –°—Ç–∞—Ç—É—Å AI —Å–µ—Ä–≤–∏—Å–∞ |
| `GET /ai/suggestions` | GET | –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤ |
| `POST /ai/generate` | POST | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `GET /ai/history` | GET | –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π |
| `PATCH /ai/:id/used` | PATCH | –û—Ç–º–µ—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |

### –ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT, —Ç–∞—Ä–∏—Ñ Premium)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /autopublish/settings` | GET | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º |
| `POST /autopublish/settings` | POST | –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `POST /autopublish/test-connection` | POST | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| `POST /autopublish/publish` | POST | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ |
| `GET /autopublish/history` | GET | –ò—Å—Ç–æ—Ä–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π |
| `DELETE /autopublish/settings/:platform` | DELETE | –£–¥–∞–ª–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /referrals/my-code` | GET | –ü–æ–ª—É—á–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ |
| `GET /referrals/stats` | GET | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ |
| `GET /referrals/list` | GET | –°–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö |
| `GET /referrals/validate/:code` | GET | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ |
| `GET /referrals/bonuses` | GET | –ò—Å—Ç–æ—Ä–∏—è –±–æ–Ω—É—Å–æ–≤ |
| `POST /referrals/withdraw` | POST | –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ |

### –ü–ª–∞—Ç–µ–∂–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `POST /payments/create` | POST | –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂ |
| `GET /payments/status/:id` | GET | –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ |
| `GET /payments/history` | GET | –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π |
| `GET /payments/pricing` | GET | –¢–∞—Ä–∏—Ñ—ã –∏ —Ü–µ–Ω—ã |
| `POST /payments/webhook/kaspi` | POST | Webhook Kaspi |
| `POST /payments/webhook/halyk` | POST | Webhook Halyk |
| `POST /payments/confirm/:id` | POST | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–ª–∞—Ç—ë–∂ (admin) |
| `GET /payments/admin/list` | GET | –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ (admin) |

### Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /push/vapid-key` | GET | VAPID –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á |
| `POST /push/subscribe` | POST | –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ push |
| `POST /push/unsubscribe` | POST | –û—Ç–ø–∏—Å–∫–∞ –æ—Ç push |
| `GET /push/notifications` | GET | –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |
| `PUT /push/notifications/:id/read` | PUT | –ü–æ–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º |
| `PUT /push/notifications/read-all` | PUT | –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ |
| `DELETE /push/notifications/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ |
| `POST /push/admin/send` | POST | –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ (admin) |
| `GET /push/admin/stats` | GET | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ push (admin) |

### –û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `POST /reviews` | POST | –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤ (JWT) |
| `GET /reviews/business/:id` | GET | –û—Ç–∑—ã–≤—ã –æ –±–∏–∑–Ω–µ—Å–µ |
| `GET /reviews/event/:id` | GET | –û—Ç–∑—ã–≤—ã –æ —Å–æ–±—ã—Ç–∏–∏ |
| `GET /reviews/:id` | GET | –î–µ—Ç–∞–ª–∏ –æ—Ç–∑—ã–≤–∞ |
| `PUT /reviews/:id` | PUT | –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤ (JWT) |
| `DELETE /reviews/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤ (JWT) |
| `POST /reviews/:id/vote` | POST | –ì–æ–ª–æ—Å–æ–≤–∞—Ç—å (JWT) |
| `POST /reviews/:id/reply` | POST | –û—Ç–≤–µ—Ç–∏—Ç—å (JWT) |
| `DELETE /reviews/reply/:id` | DELETE | –£–¥–∞–ª–∏—Ç—å –æ—Ç–≤–µ—Ç (JWT) |
| `GET /reviews/user/my-reviews` | GET | –ú–æ–∏ –æ—Ç–∑—ã–≤—ã (JWT) |
| `GET /reviews/admin/pending` | GET | –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (admin) |
| `PATCH /reviews/admin/:id` | PATCH | –û–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å (admin) |

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT admin)

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `POST /analytics/track` | POST | –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ |
| `GET /analytics/conversions` | GET | –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π |
| `GET /analytics/conversions/trends` | GET | –¢—Ä–µ–Ω–¥—ã –∫–æ–Ω–≤–µ—Ä—Å–∏–π |
| `GET /analytics/revenue` | GET | Revenue –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| `GET /analytics/referrals` | GET | –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| `GET /analytics/traffic` | GET | –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ |

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `GET /docs` | GET | Swagger UI |
| `GET /docs/openapi.json` | GET | OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è |

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã (Drizzle Schema)

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
users (
  id, email, password, name, phone, avatar,
  role: user|business|moderator|admin,
  isPremium, premiumUntil, createdAt
)

-- –ì–æ—Ä–æ–¥–∞
cities (
  id, name, nameKz, slug, region, population,
  isActive, createdAt
)

-- –ë–∏–∑–Ω–µ—Å—ã
businesses (
  id, ownerId, cityId, name, description, category,
  address, phone, whatsapp, instagram, website,
  logo, cover, isVerified,
  tier: free|lite|premium, tierUntil, postsThisMonth,
  createdAt
)

-- –°–æ–±—ã—Ç–∏—è
events (
  id, cityId, businessId, creatorId, title, description,
  category, image, isImageAiGenerated,  -- NEW: –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ AI
  videoUrl, videoThumbnail,
  date, endDate, location, address,
  price, maxPrice, isFree, isFeatured, isApproved,
  viewsCount, savesCount, createdAt
)

-- –ê–∫—Ü–∏–∏
promotions (
  id, businessId, cityId, title, description, image,
  isImageAiGenerated,  -- NEW: –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ AI
  discount, conditions, validFrom, validUntil,
  isActive, isPremiumOnly, viewsCount, savesCount,
  createdAt
)

-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–∏–∑–Ω–µ—Å–∞
business_members (
  id, businessId, userId,
  role: admin|editor|viewer,
  invitedBy, invitedAt, acceptedAt, isActive
)

-- –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ (NEW)
city_banners (
  id, cityId, businessId, title, description,
  imageUrl, link, linkType, position,
  isActive, startDate, endDate,
  viewsCount, clicksCount, createdAt, updatedAt
)

-- –§–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ (NEW)
city_photos (
  id, cityId, title, imageUrl,
  position, isActive, createdAt, updatedAt
)

-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
favorites (
  id, userId, eventId, businessId, promotionId,
  createdAt
)

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (Premium)
auto_publish_settings (
  id, businessId, platform: telegram|instagram|vk|facebook,
  isEnabled, telegramBotToken, telegramChannelId,
  instagramAccessToken, instagramBusinessAccountId,
  vkAccessToken, vkGroupId,
  facebookAccessToken, facebookPageId,  -- NEW: Facebook
  publishEvents, publishPromotions, autoPublishOnCreate,
  createdAt, updatedAt
)

-- –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–π (Premium)
auto_publish_history (
  id, businessId, platform, contentType, contentId,
  status: pending|published|failed,
  externalPostId, externalPostUrl, errorMessage,
  retryCount,  -- NEW: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
  publishedAt, createdAt
)

-- AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Premium)
ai_image_generations (
  id, businessId, userId, prompt, style,
  generatedImageUrl, status: pending|generating|completed|failed,
  errorMessage, usedFor, usedForId, creditsUsed, createdAt
)

-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã (NEW)
referral_codes (
  id, userId, code, usageCount, totalEarnings,
  isActive, createdAt
)

-- –†–µ—Ñ–µ—Ä–∞–ª—ã (NEW)
referrals (
  id, referrerId, referredId, referralCodeId,
  status: pending|registered|converted|expired,
  firstPurchaseAt, firstPurchaseAmount,
  bonusEarned, bonusGiven, createdAt
)

-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã (NEW)
referral_bonuses (
  id, userId, referralId,
  type: registration|first_purchase|subscription|withdrawal,
  amount, status: pending|approved|paid|rejected,
  description, processedAt, createdAt
)

-- –ü–ª–∞—Ç–µ–∂–∏ (NEW)
payments (
  id, userId, businessId, provider: kaspi|halyk|stripe|manual,
  type: subscription|premium|banner|other,
  amount, currency, status: pending|processing|completed|failed|refunded|cancelled,
  externalId, externalStatus, paymentUrl, qrCode,
  subscriptionType, subscriptionDays,
  expiresAt, paidAt, refundedAt, createdAt, updatedAt
)

-- Webhook –ª–æ–≥–∏ –ø–ª–∞—Ç–µ–∂–µ–π (NEW)
payment_webhooks (
  id, provider, paymentId, eventType, payload,
  signature, isProcessed, processedAt, errorMessage, createdAt
)

-- Fraud –ª–æ–≥–∏ (NEW)
fraud_logs (
  id, userId, ipAddress, userAgent,
  eventType: suspicious_login|multiple_accounts|payment_fraud|referral_abuse|rate_limit_exceeded|bot_detected,
  riskScore, details, action: warn|block_temporary|block_permanent|require_verification,
  isReviewed, reviewedBy, reviewedAt, createdAt
)

-- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (NEW)
blocked_entities (
  id, entityType: ip|device|email_domain|phone_prefix,
  entityValue, reason, blockedBy, expiresAt, createdAt
)

-- Device fingerprints (NEW)
device_fingerprints (
  id, userId, fingerprint, ipAddress, userAgent,
  lastSeenAt, createdAt
)

-- Push –ø–æ–¥–ø–∏—Å–∫–∏ (NEW)
push_subscriptions (
  id, userId, endpoint, p256dh, auth,
  userAgent, isActive, createdAt, lastUsedAt
)

-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (NEW)
notifications (
  id, userId, type: event_reminder|promotion_new|...|system,
  title, body, icon, link, data,
  isRead, isPushed, readAt, createdAt
)

-- –û—Ç–∑—ã–≤—ã (NEW)
reviews (
  id, userId, targetType: business|event,
  businessId, eventId, rating, title, content,
  pros, cons, images, isVerifiedPurchase, isApproved,
  likesCount, dislikesCount, replyCount,
  createdAt, updatedAt
)

-- –û—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Ç–∑—ã–≤—ã (NEW)
review_replies (
  id, reviewId, userId, content,
  isBusinessReply, createdAt
)

-- –ì–æ–ª–æ—Å–∞ –∑–∞ –æ—Ç–∑—ã–≤—ã (NEW)
review_votes (
  id, reviewId, userId, isHelpful, createdAt
)

-- –°–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (NEW)
analytics_events (
  id, userId, sessionId,
  eventType: page_view|event_view|premium_conversion|...,
  eventData, source, referrer,
  utmSource, utmMedium, utmCampaign,
  ipAddress, userAgent, deviceType,
  country, city, createdAt
)
```

### –†–æ–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ |
|------|-------|
| `admin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –±–∏–∑–Ω–µ—Å–æ–º |
| `editor` | –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–π |
| `viewer` | –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç–æ–≤ |

---

## –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã

### B2C (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –î–æ—Å—Ç—É–ø |
|-------|------|--------|
| –ë–∞–∑–æ–≤—ã–π | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | –ê—Ñ–∏—à–∞, –∫–∞—Ç–∞–ª–æ–≥ |
| Premium | 1,500-2,000 ‚Ç∏/–º–µ—Å | + –í—Å–µ –∞–∫—Ü–∏–∏, QR-–∫–æ–¥—ã |

### B2B (–ë–∏–∑–Ω–µ—Å)

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –ü—É–±–ª–∏–∫–∞—Ü–∏–π | –ë–∞–Ω–Ω–µ—Ä | –ö–æ–º–∞–Ω–¥–∞ |
|-------|------|------------|--------|---------|
| Free | 0 ‚Ç∏ | 3/–º–µ—Å | - | - |
| Lite | 50,000 ‚Ç∏/–º–µ—Å | 10/–º–µ—Å | - | - |
| Premium | 200,000 ‚Ç∏/–º–µ—Å | –ë–µ–∑–ª–∏–º–∏—Ç | –î–∞ | –î–æ 5 |

### –î–µ—Ç–∞–ª–∏ —Ç–∞—Ä–∏—Ñ–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ v2.2.0)

| –§—É–Ω–∫—Ü–∏—è | Free | Lite | Premium |
|---------|------|------|---------|
| –ü—É–±–ª–∏–∫–∞—Ü–∏–π –≤ –º–µ—Å—è—Ü | 3 | 10 | ‚àû |
| –§–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ–µ | 5 | 15 | 30 |
| –¢–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å, WhatsApp | ‚úÖ | ‚úÖ | ‚úÖ |
| –°—Å—ã–ª–∫–∞ –Ω–∞ Instagram | ‚úÖ | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –∏ –∫–ª–∏–∫–∏ | - | ‚úÖ | ‚úÖ |
| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–∏—Å–∫–µ | - | ‚úÖ | –¢–æ–ø |
| –ó–Ω–∞—á–æ–∫ "–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ" | - | ‚úÖ | ‚úÖ |
| –†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä | - | - | ‚úÖ |
| –ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ | - | - | –î–æ 5 |
| **–ò–ò –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | - | - | ‚úÖ Ideogram V2 |
| **–ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–æ—Ü—Å–µ—Ç–∏** | - | - | ‚úÖ TG/VK/IG |
| **–í–∏–¥–µ–æ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–æ–±—ã—Ç–∏–π** | - | - | ‚úÖ YouTube/Vimeo |

### ROI –∞–Ω–∞–ª–∏–∑

| –ë–∏–∑–Ω–µ—Å | –°—Ä–µ–¥–Ω–∏–π —á–µ–∫ | –ú–∞—Ä–∂–∞ | Lite –æ–∫—É–ø–∞–µ—Ç—Å—è | Premium –æ–∫—É–ø–∞–µ—Ç—Å—è |
|--------|-------------|-------|----------------|-------------------|
| –ö–∞—Ñ–µ/—Ä–µ—Å—Ç–æ—Ä–∞–Ω | 8-15K ‚Ç∏ | 30% | 14 –∫–ª–∏–µ–Ω—Ç–æ–≤ | 57 –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| –°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã | 12-25K ‚Ç∏ | 50% | 6 –∫–ª–∏–µ–Ω—Ç–æ–≤ | 22 –∫–ª–∏–µ–Ω—Ç–∞ |
| –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å | 40-80K ‚Ç∏ | 40% | 2 –∫–ª–∏–µ–Ω—Ç–∞ | 8 –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è | 25-60K ‚Ç∏ | 60% | 2 –∫–ª–∏–µ–Ω—Ç–∞ | 8 –∫–ª–∏–µ–Ω—Ç–æ–≤ |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏)

- [x] –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π/–∞–∫—Ü–∏–π –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ –±–∏–∑–Ω–µ—Å–∞
- [x] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –±–∏–∑–Ω–µ—Å–∞
- [x] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [x] –ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (Premium)
- [x] –§–æ—Ç–æ-–∫–∞—Ä—É—Å–µ–ª—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- [x] –£–ª—É—á—à–µ–Ω–∏–µ Header –º–µ–Ω—é
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Cloudinary)
- [x] –ë–∞–Ω–Ω–µ—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ –≤ –∞–¥–º–∏–Ω–∫–µ
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ –≤ –∞–¥–º–∏–Ω–∫–µ
- [x] –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π)
- [x] **–ò–ò –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Nano Banana)**
- [x] **–ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ —Å–æ—Ü—Å–µ—Ç–∏ (Telegram/VK/Instagram)**
- [x] **–í–∏–¥–µ–æ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–æ–±—ã—Ç–∏–π**
- [x] **–û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Kaspi/Halyk)** ‚Üê NEW
- [x] **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å first_purchase –±–æ–Ω—É—Å–∞–º–∏** ‚Üê NEW
- [x] **Fraud-–∑–∞—â–∏—Ç–∞** ‚Üê NEW
- [x] **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Üê NEW
- [x] **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏** ‚Üê NEW
- [x] **Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Üê NEW
- [x] **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π** ‚Üê NEW
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ü–æ—Å–ª–µ MVP)

- [ ] QR-–∫–æ–¥—ã –¥–ª—è –∞–∫—Ü–∏–π
- [ ] –ß–∞—Ç –º–µ–∂–¥—É –±–∏–∑–Ω–µ—Å–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–†–∞–∑–≤–∏—Ç–∏–µ)

- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (React Native)
- [ ] –ü—Ä–æ–¥–∞–∂–∞ –±–∏–ª–µ—Ç–æ–≤
- [ ] –°–æ–æ–±—â–µ—Å—Ç–≤–∞
- [ ] –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏

---

## –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

### Cloudinary (–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Cloudinary —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º unsigned upload preset:

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| Cloud Name | `dlulp8x9o` |
| Upload Preset | `afisha_unsigned` |
| –ü–∞–ø–∫–∏ | `afisha/events`, `afisha/promotions`, `afisha/cities`, `afisha/businesses` |

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç ImageUpload:**
- Drag-and-drop –∑–∞–≥—Ä—É–∑–∫–∞
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: JPG, PNG, WebP, GIF

### –§–æ—Ç–æ –≥–æ—Ä–æ–¥–æ–≤ (Cloudinary + API)

–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≥–æ—Ä–æ–¥–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Cloudinary –∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:

| –ì–æ—Ä–æ–¥ | –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |
|-------|----------------------|
| –ñ–µ–∑–∫–∞–∑–≥–∞–Ω | –ì–æ—Ä—ã –£–ª—ã—Ç–∞—É, –°—Ç–µ–ø—å –°–∞—Ä—ã–∞—Ä–∫–∞, –†–µ–∫–∞ –ö–µ–Ω–≥–∏—Ä |
| –ê–ª–º–∞—Ç—ã | –ö–∞—Ç–æ–∫ –ú–µ–¥–µ—É, –í–æ–∑–Ω–µ—Å–µ–Ω—Å–∫–∏–π —Å–æ–±–æ—Ä, –ß–∞—Ä—ã–Ω—Å–∫–∏–π –∫–∞–Ω—å–æ–Ω |
| –ê—Å—Ç–∞–Ω–∞ | –ù–∞–∑–∞—Ä–±–∞–µ–≤ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –ê—Å—Ç–∞–Ω–∞ –ê—Ä–µ–Ω–∞ |
| –ê–∫—Ç–∞—É | –ù–∞–±–µ—Ä–µ–∂–Ω–∞—è, –ö–∞—Å–ø–∏–π—Å–∫–æ–µ –º–æ—Ä–µ |
| –ö–æ–∫—à–µ—Ç–∞—É | –ë—É—Ä–∞–±–∞–π, –ü—Ä–∏—Ä–æ–¥–∞ |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ:**
1. API `/cities/:slug/photos` ‚Äî —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ñ–æ—Ç–æ –∏–∑ –ë–î
2. –•–∞—Ä–¥–∫–æ–¥ `cityLandmarks` ‚Äî fallback —Ñ–æ—Ç–æ –∏–∑ Cloudinary

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—é—Ç—Å—è –≤ –∫–∞—Ä—É—Å–µ–ª–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Embla Carousel + Autoplay.

### AI –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Ideogram V2)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Ideogram V2 –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å | ENV –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è |
|-----------|--------|----------------|
| **Ideogram** | V2 | `IDEOGRAM_API_KEY` |

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (backend/.env):**
```env
IDEOGRAM_API_KEY=your_key_here
```

**–ó–∞–∫–æ–Ω –†–ö –æ–± –ò–ò (—Å —è–Ω–≤–∞—Ä—è 2026):**

–°–æ–≥–ª–∞—Å–Ω–æ –∑–∞–∫–æ–Ω—É –æ–± –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–µ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ, –≤—Å–µ AI-–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –º–∞—Ä–∫–∏—Ä—É—é—Ç—Å—è:

- –í–∏–∑—É–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ò–ò" –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- –ü–æ–ª–µ `isImageAiGenerated` –≤ –ë–î –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∏ –∞–∫—Ü–∏–π
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: `isAiGenerated`, `aiDisclaimer`, `generatedAt`, `provider`

---

## ‚ö†Ô∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

> **–í–ê–ñ–ù–û:** –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–ª–∞—Ç–µ–∂–µ–π –∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `backend/.env`:

### Kaspi Pay Integration

```env
# Kaspi Pay API (https://kaspi.kz/pay)
KASPI_MERCHANT_ID=your_merchant_id
KASPI_API_KEY=your_api_key
KASPI_WEBHOOK_SECRET=your_webhook_secret
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ –º–µ—Ä—á–∞–Ω—Ç –Ω–∞ https://kaspi.kz/pay
2. –ü–æ–ª—É—á–∏—Ç–µ merchant_id –∏ API key –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL: `https://your-api.com/payments/webhook/kaspi`

### Halyk Epay Integration

```env
# Halyk Epay API (https://epay.halykbank.kz)
HALYK_TERMINAL_ID=your_terminal_id
HALYK_CLIENT_ID=your_client_id
HALYK_CLIENT_SECRET=your_client_secret
HALYK_WEBHOOK_SECRET=your_webhook_secret
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:**
1. –ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ω–∞ https://epay.halykbank.kz
2. –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –ø–æ–ª—É—á–∏—Ç–µ terminal_id –∏ client credentials
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ callback URL: `https://your-api.com/payments/webhook/halyk`

### Web Push Notifications (VAPID)

```env
# VAPID Keys –¥–ª—è Web Push API
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=BEl62iUYgUivxIkv69yViEuiBIa-Ib9-SkvMeAtA3LFgDzkrxZJjSgSnfckjBJuBkr3qBUYIHBQFLXYp5Nksh8U
VAPID_PRIVATE_KEY=your_private_key_here
VAPID_SUBJECT=mailto:support@afisha.kz
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π:**
```bash
npm install web-push -g
web-push generate-vapid-keys
```

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞

```env
# Database
DATABASE_URL=postgresql://user:password@host.neon.tech/dbname?sslmode=require

# JWT
JWT_SECRET=your-jwt-secret-key

# Cloudinary
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_UPLOAD_PRESET=afisha_unsigned
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# AI Image Generation (Ideogram)
IDEOGRAM_API_KEY=ide_your_key_here

# Kaspi Pay
KASPI_MERCHANT_ID=
KASPI_API_KEY=
KASPI_WEBHOOK_SECRET=

# Halyk Epay
HALYK_TERMINAL_ID=
HALYK_CLIENT_ID=
HALYK_CLIENT_SECRET=
HALYK_WEBHOOK_SECRET=

# Web Push (VAPID)
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:support@afisha.kz

# Email (Resend)
RESEND_API_KEY=re_your_key_here
```

### –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | Backend | Frontend | –ö–ª—é—á–∏ |
|------------|---------|----------|-------|
| Kaspi Pay | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚úÖ UI | ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç—Å—è |
| Halyk Epay | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚úÖ UI | ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç—Å—è |
| Web Push | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚úÖ Hooks | ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç—Å—è |
| Ideogram AI | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚úÖ UI | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω |
| Cloudinary | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚úÖ UI | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω |

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞:** [docs/UNIFIED_PRODUCT_VISION.md](./UNIFIED_PRODUCT_VISION.md)
- **User Stories:** [docs/USER_STORIES.md](./USER_STORIES.md)
- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–∞–±–∏–Ω–µ—Ç–∞:** [docs/BUSINESS_CABINET_SPEC.md](./BUSINESS_CABINET_SPEC.md)
- **API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** [docs/ADMIN_PANEL_SPEC.md](./ADMIN_PANEL_SPEC.md)

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 28 —è–Ω–≤–∞—Ä—è 2026 (v2.3.0-full)*
